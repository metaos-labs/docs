(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{442:function(t,e,s){"use strict";s.r(e);var a=s(35),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"remote-signer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#remote-signer"}},[t._v("#")]),t._v(" Remote Signer")]),t._v(" "),s("p",[t._v("The MetaOS is powered by the Tendermint consensus. Tendermint provides a remote signer option for validators. A remote signer enables the operator to store the validator key on a different machine minimizing the attack surface if a server were to be compromised.")]),t._v(" "),s("p",[t._v("The remote signer protocol implements a "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Client%E2%80%93server_model",target:"_blank",rel:"noopener noreferrer"}},[t._v("client and server architecture"),s("OutboundLink")],1),t._v(". When Tendermint requires the public key or signature for a proposal or vote it requests it from the remote signer.")]),t._v(" "),s("p",[t._v("To run a secure validator and remote signer system it is recommended to use a VPC (virtual private cloud) or a private connection.")]),t._v(" "),s("h2",{attrs:{id:"validator-keys-protecting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#validator-keys-protecting"}},[t._v("#")]),t._v(" Validator keys protecting")]),t._v(" "),s("p",[t._v("Protecting a validator's consensus key is the most important factor to take in when designing your setup. The key that a validator is given upon creation of the node is called a consensus key, it has to be online at all times in order to vote on blocks. It is "),s("strong",[t._v("not recommended")]),t._v(" to merely hold your private key in the default json file (priv_validator_key.json). Fortunately, the "),s("a",{attrs:{href:"https://interchain.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Interchain Foundation"),s("OutboundLink")],1),t._v(" has worked with a team to build a key management server for validators. You can find documentation on how to use it "),s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(", it is used extensively in production. You are not limited to using this tool, there are also HSMs (opens new window), there is not a recommended HSM.")]),t._v(" "),s("p",[t._v("Currently Tendermint uses "),s("a",{attrs:{href:"https://ed25519.cr.yp.to",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ed25519"),s("OutboundLink")],1),t._v(" keys which are widely supported across the security sector and HSMs.")]),t._v(" "),s("h2",{attrs:{id:"use-tmkms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-tmkms"}},[t._v("#")]),t._v(" Use "),s("code",[t._v("tmkms")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms",target:"_blank",rel:"noopener noreferrer"}},[t._v("tmkms"),s("OutboundLink")],1),t._v(" support the following signing backend providers:")]),t._v(" "),s("h4",{attrs:{id:"hardware-security-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hardware-security-modules"}},[t._v("#")]),t._v(" Hardware Security Modules")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms/blob/main/README.fortanixdsm.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("FortanixDSM"),s("OutboundLink")],1),t._v(" (gated under the "),s("code",[t._v("fortanixdsm")]),t._v(" cargo feature. See "),s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms/blob/main/README.fortanixdsm.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("README.fortanixdsm.md"),s("OutboundLink")],1),t._v(" for more info)")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms/blob/main/README.yubihsm.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("YubiHSM2"),s("OutboundLink")],1),t._v(" (gated under the "),s("code",[t._v("yubihsm")]),t._v(" cargo feature. See "),s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms/blob/main/README.yubihsm.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("README.yubihsm.md"),s("OutboundLink")],1),t._v(" for more info)")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.ledger.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ledger"),s("OutboundLink")],1),t._v(" (gated under the "),s("code",[t._v("ledger")]),t._v(" cargo feature)")])]),t._v(" "),s("h4",{attrs:{id:"software-only"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#software-only"}},[t._v("#")]),t._v(" Software-Only")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("softsign")]),t._v(" backend which uses "),s("a",{attrs:{href:"https://github.com/dalek-cryptography/ed25519-dalek",target:"_blank",rel:"noopener noreferrer"}},[t._v("ed25519-dalek"),s("OutboundLink")],1)])]),t._v(" "),s("blockquote",[s("h3",{attrs:{id:"tip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tip"}},[t._v("#")]),t._v(" Tip")]),t._v(" "),s("p",[t._v("Hardware security modules are recommended, but we will use "),s("code",[t._v("softsign")]),t._v(" to show how to use "),s("code",[t._v("tmkms")]),t._v(" to manage validator keys and implement remote signing.")])]),t._v(" "),s("h3",{attrs:{id:"installing-tmkms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installing-tmkms"}},[t._v("#")]),t._v(" Installing "),s("code",[t._v("tmkms")])]),t._v(" "),s("p",[t._v("Read "),s("a",{attrs:{href:"https://github.com/iqlusioninc/tmkms#installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1),t._v(" to learn how to install "),s("code",[t._v("tmkms")]),t._v(".")]),t._v(" "),s("p",[t._v("Here we use "),s("code",[t._v("softsign")]),t._v(" module, so we should use "),s("code",[t._v("--features=softsign")]),t._v(" flag to build and install "),s("code",[t._v("tmkms")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),s("h4",{attrs:{id:"_1-tmkms-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-tmkms-init"}},[t._v("#")]),t._v(" 1. "),s("code",[t._v("tmkms init")])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("tmkms init")]),t._v(" command can be used to generate a directory containing the configuration files needed to run the KMS.\nRun this:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms init /path/to/kms/home\n")])])]),s("p",[t._v("For example:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms init ~/.kms/\n")])])]),s("p",[t._v("Please view "),s("code",[t._v("~/.kms")]),t._v(" folder.")]),t._v(" "),s("h4",{attrs:{id:"_2-prepare-keys-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-prepare-keys-files"}},[t._v("#")]),t._v(" 2. Prepare keys files")]),t._v(" "),s("p",[t._v("If the validator key file(usually at "),s("code",[t._v("~/.metaos/config/priv_validator_key.json")]),t._v(") has been prepared already, run the following command to import and create a consensus key file for KMS:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms softsign "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" /path/to/validator/key/file /path/to/target/consensus/key/file\n")])])]),s("p",[t._v("For example:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms softsign "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" ~/.metaos/config/priv_validator_key.json ~/.kms/secrets/consensus.key\n")])])]),s("p",[t._v("We also need to create a "),s("code",[t._v("signing-connection.key")]),t._v(" for identifying the remote signing connection. When we run "),s("code",[t._v("tmkms init")]),t._v(" command, it should be created as "),s("code",[t._v("~/.kms/secrets/kms-identity.key")]),t._v(" file. If you want to create a new one, run the following command:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms softsign kengen /path/to/signing/connection/file\n")])])]),s("p",[t._v("For example:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms softsign kengen ~/.kms/secrets/kms-identity.key\n")])])]),s("h4",{attrs:{id:"_3-edit-tmkms-toml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-edit-tmkms-toml"}},[t._v("#")]),t._v(" 3. Edit "),s("code",[t._v("tmkms.toml")])]),t._v(" "),s("p",[s("code",[t._v("tmkms.toml")]),t._v(" example:")]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Tendermint KMS configuration file")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Chain Configuration")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### MetaOS Network")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("chain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("id")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"metaos_99237-1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("key_format")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bech32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("account_key_prefix")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mtospub"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("consensus_key_prefix")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mtosvalconspub"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("state_file")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home/user/.kms/state/metaos_99237-1-consensus.json"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Signing Provider Configuration")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### Software-based Signer Configuration")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("providers.softsign")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("chain_ids")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"metaos_99237-1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("key_type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"consensus"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("path")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home/user/.kms/secrets/consensus.key"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Validator Configuration")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("validator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("chain_id")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"metaos_99237-1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tcp://127.0.0.1:26660"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The `priv_validator_laddr` address in `~/.metaos/config/config.toml` on the validator instance.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("secret_key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home/user/.kms/secrets/kms-identity.key"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("protocol_version")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v0.34"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This should be set same as the version of Tendermint, use `metaosd tendermint version` to check. If you are using `ledger` module , `ledger` should be set. ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("reconnect")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),s("h4",{attrs:{id:"_4-change-metaos-validator-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-change-metaos-validator-configuration"}},[t._v("#")]),t._v(" 4. Change MetaOS validator configuration")]),t._v(" "),s("p",[t._v("Locate to the "),s("code",[t._v("config.toml")]),t._v(" file in the home path for "),s("code",[t._v("metaosd")]),t._v(" running as a MetaOS validator. Set the "),s("code",[t._v("priv_validator_laddr")]),t._v(" value:")]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TCP or UNIX socket address for Tendermint to listen on for")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# connections from an external PrivValidator process")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("priv_validator_laddr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tcp://127.0.0.1:26660"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("Then backup your validator key file(such as "),s("code",[t._v("priv_validator_key.json")]),t._v(") and remove it from the validator instance.")]),t._v(" "),s("h4",{attrs:{id:"_5-run-tmkms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-run-tmkms"}},[t._v("#")]),t._v(" 5. Run "),s("code",[t._v("tmkms")])]),t._v(" "),s("p",[t._v("Run the following command to start KMS:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms start -c /path/to/tmkms.toml\n")])])]),s("p",[t._v("Example:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("tmkms start -c ~/.kms/tmkms.toml\n")])])]),s("p",[t._v("Output:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:27:05.904223Z  INFO tmkms::commands::start: tmkms "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.12")]),t._v(".2 starting up"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:27:05.909628Z  INFO tmkms::keyring: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("keyring:softsign"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" added consensus Ed25519 key: mtosvalconspub1zcjduepqq7520jcw4guf2swcc8aqhh2pj533egrqam3h0lya8cl2e2ekyelq3kjr7t\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:27:05.912771Z  INFO tmkms::connection::tcp: KMS node ID: 0f185204711dd6a576e082396576e5b54ba4624e\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:27:05.912997Z ERROR tmkms::client: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("metaos_99237-1@tcp://127.0.0.1:26660"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" I/O error: Connection refused "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os error "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("111")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"_6-run-or-restart-the-validator-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-run-or-restart-the-validator-instance"}},[t._v("#")]),t._v(" 6. Run or Restart the validator instance")]),t._v(" "),s("p",[t._v("You will find the following context in the logs of "),s("code",[t._v("metaosd")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":34PM INF Starting SignerListenerEndpoint "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("impl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SignerListenerEndpoint "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("privval "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":34PM INF SignerListener: Listening "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" new connection "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("privval "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":34PM INF SignerListener: Blocking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" connection "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("privval "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":34PM INF SignerListener: Connected "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("privval "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node\n")])])]),s("p",[t._v("And you will also watch the change of "),s("code",[t._v("tmkms")]),t._v(" output:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:35:20.823150Z  INFO tmkms::connection::tcp: KMS node ID: 0f185204711dd6a576e082396576e5b54ba4624e\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:35:20.824130Z  INFO tmkms::session: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("metaos_99237-1@tcp://127.0.0.1:26660"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" connected to validator successfully\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:35:20.824164Z  WARN tmkms::session: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("metaos_99237-1@tcp://127.0.0.1:26660"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": unverified validator peer ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d9bbd8d7470f480d63736bee1a32f75a60999024"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-08-12T07:35:21.863242Z  INFO tmkms::session: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("metaos_99237-1@tcp://127.0.0.1:26660"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" signed Proposal:88552DEB62 at h/r/s "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1198")]),t._v("/0/0 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("If "),s("code",[t._v("tmkms")]),t._v(" instance crashed, you will find the following context in the logs of "),s("code",[t._v("metaosd")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":36PM INF SignerListener: Blocking "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" connection "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("privval "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":37PM ERR SignerListener: Ping "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("privval "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node\n")])])]),s("h2",{attrs:{id:"challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#challenge"}},[t._v("#")]),t._v(" Challenge")]),t._v(" "),s("p",[t._v("You must ensure the stability of the "),s("code",[t._v("tmkms")]),t._v(" service and avoid its unexpected interruption, because this will cause the validator to be slashed.")]),t._v(" "),s("blockquote",[s("h2",{attrs:{id:"caution"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#caution"}},[t._v("#")]),t._v(" Caution!")]),t._v(" "),s("p",[t._v("Do not let a remote signer serve multiple validator instances on the same network. This may cause "),s("code",[t._v("double-signing")]),t._v(" problems to cause the validator to be slashed even jailed.")])])])}),[],!1,null,null,null);e.default=n.exports}}]);