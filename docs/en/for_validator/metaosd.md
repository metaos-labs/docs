# metaosd

### Build and Configuration

#### Using `metaosd`

After you have obtained the latest metaosd binary, run:
```bash
metaosd [command] [flags]
```

Check the version you are running using

```bash
metaosd version
```

There is also a -h, --help command available

```bash
metaosd -h
```

### Config and data directory

By default, your config and data are stored in the folder located at the ~/.metaos directory.

```bash
.                                   # ~/.metaos
  ├── data/                           # Contains the databases used by the node.
  └── config/
      ├── app.toml                   # Application-related configuration file.
      ├── config.toml                # Tendermint-related configuration file.
      ├── genesis.json               # The genesis file.
      ├── node_key.json              # Private key to use for node authentication in the p2p protocol.
      └── priv_validator_key.json    # Private key to use as a validator in the consensus protocol.
```

To specify the `metaosd` config and data storage directory; you can update it using the global flag `--home <directory>`

### Configuring the Node

The Cosmos SDK automatically generates two configuration files inside `~/.metaos/config`:
- `config.toml`: used to configure the Tendermint, learn more on [Tendermint's documentation](https://docs.tendermint.com/master/nodes/configuration.html),
- `app.toml`: generated by the Cosmos SDK, and used to configure your app, such as state pruning strategies, telemetry, gRPC and REST servers configuration, state sync, JSON-RPC, etc.

Both files are heavily commented, please refer to them directly to tweak your node.

One example config to tweak is the `minimum-gas-prices` field inside `app.toml`, which defines the minimum amount the validator node is willing to accept for processing a transaction. It is an anti spam mechanism and it will reject incoming transactions with less than the minimum gas prices.

If it's empty, make sure to edit the field with some value, for example 10token, or else the node will halt on startup.

```yaml
 # The minimum gas prices a validator is willing to accept for processing a
 # transaction. A transaction's fees must meet the minimum of any denomination
 # specified in this config (e.g. 0.25token1;0.0001token2).
 minimum-gas-prices = "0amtos"
```

### Pruning of State

There are four strategies for pruning state. These strategies apply only to state and do not apply to block storage. 
To set pruning, adjust the `pruning` parameter in the `~/.metaos/config/app.toml` file. The following pruning state settings are available:

- `everything`: Prune all saved states other than the current state.
- `nothing`: Save all states and delete nothing.
- `default`: Save the last 100 states and the state of every 10,000th block.
- `custom`: Specify pruning settings with the `pruning-keep-recent`, `pruning-keep-every`, and `pruning-interval` parameters.

By default, every node is in `default` mode which is the recommended setting for most environments. 
If you would like to change your nodes pruning strategy then you must do so when the node is initialized. 
Passing a flag when starting `metaos` will always override settings in the `app.toml` file, 
if you would like to change your node to the `everything` mode then you can pass the `--pruning-everything` flag when you call metaosd start.