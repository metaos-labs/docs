<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Remote Signer | MetaOS Docs</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs/favicon.ico">
    <link rel="manifest" href="/docs/manifest.json">
    <link rel="apple-touch-icon" href="/docs/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#732ad2">
    <meta name="description" content="Developer documentation for the MetaOS">
    <meta name="theme-color" content="#732ad2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/docs/assets/css/0.styles.9f4aaddc.css" as="style"><link rel="preload" href="/docs/assets/js/app.8eec186a.js" as="script"><link rel="preload" href="/docs/assets/js/3.ef547447.js" as="script"><link rel="preload" href="/docs/assets/js/27.a332de22.js" as="script"><link rel="preload" href="/docs/assets/js/4.543fae8f.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.8cef8d6b.js"><link rel="prefetch" href="/docs/assets/js/11.25fd7d6f.js"><link rel="prefetch" href="/docs/assets/js/12.98bd9ccc.js"><link rel="prefetch" href="/docs/assets/js/13.58bea21f.js"><link rel="prefetch" href="/docs/assets/js/14.4e1bc660.js"><link rel="prefetch" href="/docs/assets/js/15.82e017a7.js"><link rel="prefetch" href="/docs/assets/js/16.ede99731.js"><link rel="prefetch" href="/docs/assets/js/17.8af013a8.js"><link rel="prefetch" href="/docs/assets/js/18.f655b7f9.js"><link rel="prefetch" href="/docs/assets/js/19.36be0543.js"><link rel="prefetch" href="/docs/assets/js/20.39823d63.js"><link rel="prefetch" href="/docs/assets/js/21.6d92df81.js"><link rel="prefetch" href="/docs/assets/js/22.ec9760e0.js"><link rel="prefetch" href="/docs/assets/js/23.2a691bc4.js"><link rel="prefetch" href="/docs/assets/js/24.c03671b9.js"><link rel="prefetch" href="/docs/assets/js/25.0fbb5496.js"><link rel="prefetch" href="/docs/assets/js/26.c3a4e4b7.js"><link rel="prefetch" href="/docs/assets/js/28.40f2ab04.js"><link rel="prefetch" href="/docs/assets/js/29.8deefc30.js"><link rel="prefetch" href="/docs/assets/js/30.a5d7b07c.js"><link rel="prefetch" href="/docs/assets/js/31.be2aff5c.js"><link rel="prefetch" href="/docs/assets/js/32.b22e5d65.js"><link rel="prefetch" href="/docs/assets/js/33.09c60894.js"><link rel="prefetch" href="/docs/assets/js/34.11971111.js"><link rel="prefetch" href="/docs/assets/js/35.3add035c.js"><link rel="prefetch" href="/docs/assets/js/36.90ed3117.js"><link rel="prefetch" href="/docs/assets/js/37.934d3e5d.js"><link rel="prefetch" href="/docs/assets/js/38.f8309a82.js"><link rel="prefetch" href="/docs/assets/js/39.f556ae9c.js"><link rel="prefetch" href="/docs/assets/js/40.e8d55a27.js"><link rel="prefetch" href="/docs/assets/js/41.c14af8b9.js"><link rel="prefetch" href="/docs/assets/js/42.b9e694f9.js"><link rel="prefetch" href="/docs/assets/js/43.155a141a.js"><link rel="prefetch" href="/docs/assets/js/44.f2f2495e.js"><link rel="prefetch" href="/docs/assets/js/45.57bcb2d7.js"><link rel="prefetch" href="/docs/assets/js/46.6a4b9ff9.js"><link rel="prefetch" href="/docs/assets/js/47.948f2a3c.js"><link rel="prefetch" href="/docs/assets/js/48.1daa61af.js"><link rel="prefetch" href="/docs/assets/js/49.51fd92db.js"><link rel="prefetch" href="/docs/assets/js/5.09ebcc9e.js"><link rel="prefetch" href="/docs/assets/js/50.4f295683.js"><link rel="prefetch" href="/docs/assets/js/51.c93adaab.js"><link rel="prefetch" href="/docs/assets/js/52.db172170.js"><link rel="prefetch" href="/docs/assets/js/53.af9d8f71.js"><link rel="prefetch" href="/docs/assets/js/54.8031e252.js"><link rel="prefetch" href="/docs/assets/js/55.4f6638fc.js"><link rel="prefetch" href="/docs/assets/js/56.a2a8d319.js"><link rel="prefetch" href="/docs/assets/js/57.11fbe5a7.js"><link rel="prefetch" href="/docs/assets/js/58.dee4adc2.js"><link rel="prefetch" href="/docs/assets/js/59.4cf30fc5.js"><link rel="prefetch" href="/docs/assets/js/6.53bd7877.js"><link rel="prefetch" href="/docs/assets/js/60.947e933e.js"><link rel="prefetch" href="/docs/assets/js/61.04f50cec.js"><link rel="prefetch" href="/docs/assets/js/62.b4a2133e.js"><link rel="prefetch" href="/docs/assets/js/63.84b58c65.js"><link rel="prefetch" href="/docs/assets/js/64.f82cfbce.js"><link rel="prefetch" href="/docs/assets/js/65.7d0a9885.js"><link rel="prefetch" href="/docs/assets/js/7.d74dec53.js"><link rel="prefetch" href="/docs/assets/js/8.f3c5c757.js"><link rel="prefetch" href="/docs/assets/js/9.1361b49a.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.f68603d6.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.9f4aaddc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/en/" class="home-link router-link-active"><img src="/docs/favicon.ico" alt="MetaOS Docs" class="logo"> <span class="site-name can-hide">MetaOS Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/metaos-labs/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/metaos-labs/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ABOUT MetaOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/" aria-current="page" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>For Web3 User</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Basic Concepts</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/for_web3_user/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/docs/en/for_web3_user/tokens.html" class="sidebar-link">Tokens</a></li><li><a href="/docs/en/for_web3_user/gas-and-fees.html" class="sidebar-link">Gas and Fees</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Digital Wallets</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Account Keys</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Links</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>For Web3 Developer</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/for_web3_dev/quick_connect.html" class="sidebar-link">Quick Connect</a></li><li><a href="/docs/en/for_web3_dev/guides.html" class="sidebar-link">Guides</a></li><li><a href="/docs/en/for_web3_dev/metaos_client.html" class="sidebar-link">MetaOs Clients</a></li><li><a href="/docs/en/for_web3_dev/localnet.html" class="sidebar-link">LocalNet</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Ethereum Tooling</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Ethereum JSON-RPC</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/docs/en/for_web3_dev/wasm.html" class="sidebar-link">Smart Contract</a></li><li><a href="/docs/en/for_web3_dev/cosmos_grpc.html" class="sidebar-link">Cosmos gRPC &amp; REST API</a></li><li><a href="/docs/en/for_web3_dev/tendermint_rpc.html" class="sidebar-link">Tendermint RPC</a></li><li><a href="/docs/en/for_web3_dev/ts.html" class="sidebar-link">Typescript SDK</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Modules</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>For Validator&amp;Delegators</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/for_validator/overview.html" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Installation &amp; Run a Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Validator Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/for_validator/run_validator/contents.html" class="sidebar-link">Contents</a></li><li><a href="/docs/en/for_validator/run_validator/register-a-validator.html" class="sidebar-link">Register a validator</a></li><li><a href="/docs/en/for_validator/run_validator/restore-a-validator.html" class="sidebar-link">Restore a validator</a></li><li><a href="/docs/en/for_validator/run_validator/validator-states.html" class="sidebar-link">States of validator</a></li><li><a href="/docs/en/for_validator/run_validator/delegate-to-a-validator.html" class="sidebar-link">Delegate to a validator</a></li><li><a href="/docs/en/for_validator/run_validator/security-practices.html" class="sidebar-link">Implement security practices</a></li><li><a href="/docs/en/for_validator/run_validator/sentry-node-architecture.html" class="sidebar-link">Sentry Node Architecture</a></li><li><a href="/docs/en/for_validator/run_validator/remote-signer.html" aria-current="page" class="active sidebar-link">Remote Signer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/en/for_validator/run_validator/remote-signer.html#validator-keys-protecting" class="sidebar-link">Validator keys protecting</a></li><li class="sidebar-sub-header"><a href="/docs/en/for_validator/run_validator/remote-signer.html#use-tmkms" class="sidebar-link">Use tmkms</a></li><li class="sidebar-sub-header"><a href="/docs/en/for_validator/run_validator/remote-signer.html#challenge" class="sidebar-link">Challenge</a></li><li class="sidebar-sub-header"><a href="/docs/en/for_validator/run_validator/remote-signer.html#caution" class="sidebar-link">Caution!</a></li></ul></li></ul></section></li><li><a href="/docs/en/for_validator/disk_usage.html" class="sidebar-link">Disk Usage Optimization</a></li><li><a href="/docs/en/for_validator/snapshot.html" class="sidebar-link">Snapshot</a></li><li><a href="/docs/en/for_validator/faq.html" class="sidebar-link">Validator FAQ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="remote-signer"><a href="#remote-signer" class="header-anchor">#</a> Remote Signer</h1> <p>The MetaOS is powered by the Tendermint consensus. Tendermint provides a remote signer option for validators. A remote signer enables the operator to store the validator key on a different machine minimizing the attack surface if a server were to be compromised.</p> <p>The remote signer protocol implements a <a href="https://en.wikipedia.org/wiki/Client%E2%80%93server_model" target="_blank" rel="noopener noreferrer">client and server architecture<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. When Tendermint requires the public key or signature for a proposal or vote it requests it from the remote signer.</p> <p>To run a secure validator and remote signer system it is recommended to use a VPC (virtual private cloud) or a private connection.</p> <h2 id="validator-keys-protecting"><a href="#validator-keys-protecting" class="header-anchor">#</a> Validator keys protecting</h2> <p>Protecting a validator's consensus key is the most important factor to take in when designing your setup. The key that a validator is given upon creation of the node is called a consensus key, it has to be online at all times in order to vote on blocks. It is <strong>not recommended</strong> to merely hold your private key in the default json file (priv_validator_key.json). Fortunately, the <a href="https://interchain.io" target="_blank" rel="noopener noreferrer">Interchain Foundation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> has worked with a team to build a key management server for validators. You can find documentation on how to use it <a href="https://github.com/iqlusioninc/tmkms" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, it is used extensively in production. You are not limited to using this tool, there are also HSMs (opens new window), there is not a recommended HSM.</p> <p>Currently Tendermint uses <a href="https://ed25519.cr.yp.to" target="_blank" rel="noopener noreferrer">Ed25519<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> keys which are widely supported across the security sector and HSMs.</p> <h2 id="use-tmkms"><a href="#use-tmkms" class="header-anchor">#</a> Use <code>tmkms</code></h2> <p><a href="https://github.com/iqlusioninc/tmkms" target="_blank" rel="noopener noreferrer">tmkms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> support the following signing backend providers:</p> <h4 id="hardware-security-modules"><a href="#hardware-security-modules" class="header-anchor">#</a> Hardware Security Modules</h4> <ul><li><a href="https://github.com/iqlusioninc/tmkms/blob/main/README.fortanixdsm.md" target="_blank" rel="noopener noreferrer">FortanixDSM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (gated under the <code>fortanixdsm</code> cargo feature. See <a href="https://github.com/iqlusioninc/tmkms/blob/main/README.fortanixdsm.md" target="_blank" rel="noopener noreferrer">README.fortanixdsm.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more info)</li> <li><a href="https://github.com/iqlusioninc/tmkms/blob/main/README.yubihsm.md" target="_blank" rel="noopener noreferrer">YubiHSM2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (gated under the <code>yubihsm</code> cargo feature. See <a href="https://github.com/iqlusioninc/tmkms/blob/main/README.yubihsm.md" target="_blank" rel="noopener noreferrer">README.yubihsm.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more info)</li> <li><a href="https://www.ledger.com/" target="_blank" rel="noopener noreferrer">Ledger<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (gated under the <code>ledger</code> cargo feature)</li></ul> <h4 id="software-only"><a href="#software-only" class="header-anchor">#</a> Software-Only</h4> <ul><li><code>softsign</code> backend which uses <a href="https://github.com/dalek-cryptography/ed25519-dalek" target="_blank" rel="noopener noreferrer">ed25519-dalek<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><h3 id="tip"><a href="#tip" class="header-anchor">#</a> Tip</h3> <p>Hardware security modules are recommended, but we will use <code>softsign</code> to show how to use <code>tmkms</code> to manage validator keys and implement remote signing.</p></blockquote> <h3 id="installing-tmkms"><a href="#installing-tmkms" class="header-anchor">#</a> Installing <code>tmkms</code></h3> <p>Read <a href="https://github.com/iqlusioninc/tmkms#installation" target="_blank" rel="noopener noreferrer">this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to learn how to install <code>tmkms</code>.</p> <p>Here we use <code>softsign</code> module, so we should use <code>--features=softsign</code> flag to build and install <code>tmkms</code>.</p> <h3 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h3> <h4 id="_1-tmkms-init"><a href="#_1-tmkms-init" class="header-anchor">#</a> 1. <code>tmkms init</code></h4> <p>The <code>tmkms init</code> command can be used to generate a directory containing the configuration files needed to run the KMS.
Run this:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms init /path/to/kms/home
</code></pre></div><p>For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms init ~/.kms/
</code></pre></div><p>Please view <code>~/.kms</code> folder.</p> <h4 id="_2-prepare-keys-files"><a href="#_2-prepare-keys-files" class="header-anchor">#</a> 2. Prepare keys files</h4> <p>If the validator key file(usually at <code>~/.metaos/config/priv_validator_key.json</code>) has been prepared already, run the following command to import and create a consensus key file for KMS:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms softsign <span class="token function">import</span> /path/to/validator/key/file /path/to/target/consensus/key/file
</code></pre></div><p>For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms softsign <span class="token function">import</span> ~/.metaos/config/priv_validator_key.json ~/.kms/secrets/consensus.key
</code></pre></div><p>We also need to create a <code>signing-connection.key</code> for identifying the remote signing connection. When we run <code>tmkms init</code> command, it should be created as <code>~/.kms/secrets/kms-identity.key</code> file. If you want to create a new one, run the following command:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms softsign kengen /path/to/signing/connection/file
</code></pre></div><p>For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms softsign kengen ~/.kms/secrets/kms-identity.key
</code></pre></div><h4 id="_3-edit-tmkms-toml"><a href="#_3-edit-tmkms-toml" class="header-anchor">#</a> 3. Edit <code>tmkms.toml</code></h4> <p><code>tmkms.toml</code> example:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token comment"># Tendermint KMS configuration file</span>
<span class="token comment">## Chain Configuration</span>
<span class="token comment">### MetaOS Network</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">chain</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">id</span> <span class="token punctuation">=</span> <span class="token string">&quot;metaos_99237-1&quot;</span>
<span class="token key property">key_format</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;bech32&quot;</span><span class="token punctuation">,</span> <span class="token key property">account_key_prefix</span> <span class="token punctuation">=</span> <span class="token string">&quot;mtospub&quot;</span><span class="token punctuation">,</span> <span class="token key property">consensus_key_prefix</span> <span class="token punctuation">=</span> <span class="token string">&quot;mtosvalconspub&quot;</span> <span class="token punctuation">}</span>
<span class="token key property">state_file</span> <span class="token punctuation">=</span> <span class="token string">&quot;/home/user/.kms/state/metaos_99237-1-consensus.json&quot;</span>
<span class="token comment">## Signing Provider Configuration</span>
<span class="token comment">### Software-based Signer Configuration</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">providers.softsign</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">chain_ids</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;metaos_99237-1&quot;</span><span class="token punctuation">]</span>
<span class="token key property">key_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;consensus&quot;</span>
<span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;/home/user/.kms/secrets/consensus.key&quot;</span>
<span class="token comment">## Validator Configuration</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">validator</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">chain_id</span> <span class="token punctuation">=</span> <span class="token string">&quot;metaos_99237-1&quot;</span>
<span class="token key property">addr</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp://127.0.0.1:26660&quot;</span> <span class="token comment"># The `priv_validator_laddr` address in `~/.metaos/config/config.toml` on the validator instance.</span>
<span class="token key property">secret_key</span> <span class="token punctuation">=</span> <span class="token string">&quot;/home/user/.kms/secrets/kms-identity.key&quot;</span>
<span class="token key property">protocol_version</span> <span class="token punctuation">=</span> <span class="token string">&quot;v0.34&quot;</span> <span class="token comment"># This should be set same as the version of Tendermint, use `metaosd tendermint version` to check. If you are using `ledger` module , `ledger` should be set. </span>
<span class="token key property">reconnect</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</code></pre></div><h4 id="_4-change-metaos-validator-configuration"><a href="#_4-change-metaos-validator-configuration" class="header-anchor">#</a> 4. Change MetaOS validator configuration</h4> <p>Locate to the <code>config.toml</code> file in the home path for <code>metaosd</code> running as a MetaOS validator. Set the <code>priv_validator_laddr</code> value:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment"># TCP or UNIX socket address for Tendermint to listen on for</span>
<span class="token comment"># connections from an external PrivValidator process</span>
<span class="token key property">priv_validator_laddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp://127.0.0.1:26660&quot;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>Then backup your validator key file(such as <code>priv_validator_key.json</code>) and remove it from the validator instance.</p> <h4 id="_5-run-tmkms"><a href="#_5-run-tmkms" class="header-anchor">#</a> 5. Run <code>tmkms</code></h4> <p>Run the following command to start KMS:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms start -c /path/to/tmkms.toml
</code></pre></div><p>Example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tmkms start -c ~/.kms/tmkms.toml
</code></pre></div><p>Output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">2022</span>-08-12T07:27:05.904223Z  INFO tmkms::commands::start: tmkms <span class="token number">0.12</span>.2 starting up<span class="token punctuation">..</span>.
<span class="token number">2022</span>-08-12T07:27:05.909628Z  INFO tmkms::keyring: <span class="token punctuation">[</span>keyring:softsign<span class="token punctuation">]</span> added consensus Ed25519 key: mtosvalconspub1zcjduepqq7520jcw4guf2swcc8aqhh2pj533egrqam3h0lya8cl2e2ekyelq3kjr7t
<span class="token number">2022</span>-08-12T07:27:05.912771Z  INFO tmkms::connection::tcp: KMS node ID: 0f185204711dd6a576e082396576e5b54ba4624e
<span class="token number">2022</span>-08-12T07:27:05.912997Z ERROR tmkms::client: <span class="token punctuation">[</span>metaos_99237-1@tcp://127.0.0.1:26660<span class="token punctuation">]</span> I/O error: Connection refused <span class="token punctuation">(</span>os error <span class="token number">111</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_6-run-or-restart-the-validator-instance"><a href="#_6-run-or-restart-the-validator-instance" class="header-anchor">#</a> 6. Run or Restart the validator instance</h4> <p>You will find the following context in the logs of <code>metaosd</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">3</span>:34PM INF Starting SignerListenerEndpoint <span class="token function">service</span> <span class="token assign-left variable">impl</span><span class="token operator">=</span>SignerListenerEndpoint <span class="token assign-left variable">module</span><span class="token operator">=</span>privval <span class="token assign-left variable">server</span><span class="token operator">=</span>node
<span class="token number">3</span>:34PM INF SignerListener: Listening <span class="token keyword">for</span> new connection <span class="token assign-left variable">module</span><span class="token operator">=</span>privval <span class="token assign-left variable">server</span><span class="token operator">=</span>node
<span class="token number">3</span>:34PM INF SignerListener: Blocking <span class="token keyword">for</span> connection <span class="token assign-left variable">module</span><span class="token operator">=</span>privval <span class="token assign-left variable">server</span><span class="token operator">=</span>node
<span class="token number">3</span>:34PM INF SignerListener: Connected <span class="token assign-left variable">module</span><span class="token operator">=</span>privval <span class="token assign-left variable">server</span><span class="token operator">=</span>node
</code></pre></div><p>And you will also watch the change of <code>tmkms</code> output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">2022</span>-08-12T07:35:20.823150Z  INFO tmkms::connection::tcp: KMS node ID: 0f185204711dd6a576e082396576e5b54ba4624e
<span class="token number">2022</span>-08-12T07:35:20.824130Z  INFO tmkms::session: <span class="token punctuation">[</span>metaos_99237-1@tcp://127.0.0.1:26660<span class="token punctuation">]</span> connected to validator successfully
<span class="token number">2022</span>-08-12T07:35:20.824164Z  WARN tmkms::session: <span class="token punctuation">[</span>metaos_99237-1@tcp://127.0.0.1:26660<span class="token punctuation">]</span>: unverified validator peer ID<span class="token operator">!</span> <span class="token punctuation">(</span>d9bbd8d7470f480d63736bee1a32f75a60999024<span class="token punctuation">)</span>
<span class="token number">2022</span>-08-12T07:35:21.863242Z  INFO tmkms::session: <span class="token punctuation">[</span>metaos_99237-1@tcp://127.0.0.1:26660<span class="token punctuation">]</span> signed Proposal:88552DEB62 at h/r/s <span class="token number">1198</span>/0/0 <span class="token punctuation">(</span><span class="token number">0</span> ms<span class="token punctuation">)</span>
</code></pre></div><p>If <code>tmkms</code> instance crashed, you will find the following context in the logs of <code>metaosd</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">3</span>:36PM INF SignerListener: Blocking <span class="token keyword">for</span> connection <span class="token assign-left variable">module</span><span class="token operator">=</span>privval <span class="token assign-left variable">server</span><span class="token operator">=</span>node
<span class="token number">3</span>:37PM ERR SignerListener: Ping <span class="token function">timeout</span> <span class="token assign-left variable">module</span><span class="token operator">=</span>privval <span class="token assign-left variable">server</span><span class="token operator">=</span>node
</code></pre></div><h2 id="challenge"><a href="#challenge" class="header-anchor">#</a> Challenge</h2> <p>You must ensure the stability of the <code>tmkms</code> service and avoid its unexpected interruption, because this will cause the validator to be slashed.</p> <blockquote><h2 id="caution"><a href="#caution" class="header-anchor">#</a> Caution!</h2> <p>Do not let a remote signer serve multiple validator instances on the same network. This may cause <code>double-signing</code> problems to cause the validator to be slashed even jailed.</p></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/metaos-labs/docs/edit/main/docs/en/for_validator/run_validator/remote-signer.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/en/for_validator/run_validator/sentry-node-architecture.html" class="prev">
        Sentry Node Architecture
      </a></span> <span class="next"><a href="/docs/en/for_validator/disk_usage.html">
        Disk Usage Optimization
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.8eec186a.js" defer></script><script src="/docs/assets/js/3.ef547447.js" defer></script><script src="/docs/assets/js/27.a332de22.js" defer></script><script src="/docs/assets/js/4.543fae8f.js" defer></script>
  </body>
</html>
